

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>morbo.validators &mdash; morbo v0.9 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="morbo v0.9 documentation" href="index.html" />
    <link rel="next" title="morbo.model" href="model.html" />
    <link rel="prev" title="morbo.connection" href="connection.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="morbo.model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="connection.html" title="morbo.connection"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">morbo v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-morbo.validators">
<span id="morbo-validators"></span><h1>morbo.validators<a class="headerlink" href="#module-morbo.validators" title="Permalink to this headline">¶</a></h1>
<p>This package provides a simple validation system as well as a number of 
validators and converters. You&#8217;ll probably find it&#8217;s usage familiar.</p>
<p>Validators generally perform one task: check that a value meets a certain
specification. Sometimes they also perform a conversion. For instance, a time
validator might validate that a value is in one of a number of formats and then
convert the value to, say, a datetime instance or a POSIX timestamp.</p>
<p>This package contains quite a few useful validators but doesn&#8217;t even try to include 
the kitchen sink. Most applications will have their own validation requirements and 
the thinking here is to make it as easy as possible to create new validators, rather
than create a library that covers all cases.</p>
<p>So, creating validators is straightforward. Subclass Validator and implement 
the validate() method. That&#8217;s all that&#8217;s required. Here is an example that will 
only validate yummy things. Optionally, it will convert to yumminess level:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Yummy</span><span class="p">(</span><span class="n">Validator</span><span class="p">):</span>
    <span class="n">yumminess</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;Pizza&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
        <span class="s">&#39;Pie&#39;</span><span class="p">:</span> <span class="mf">2.75</span><span class="p">,</span>
        <span class="s">&#39;Steak&#39;</span><span class="p">:</span> <span class="mf">5.58</span><span class="p">,</span>
        <span class="s">&#39;Sushi&#39;</span><span class="p">:</span> <span class="mf">14.62</span><span class="p">,</span>
        <span class="s">&#39;Duck Confit&#39;</span><span class="p">:</span> <span class="mf">28.06</span>
    <span class="p">}</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">should_convert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">should_convert</span> <span class="o">=</span> <span class="n">should_convert</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Yummy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yumminess</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidError</span><span class="p">(</span><span class="s">&#39;Yumminess not known for &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_convert</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yumminess</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
<p>It&#8217;s a convention, but not a requirement, to put error values in the class like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Yummy</span><span class="p">(</span><span class="n">Validator</span><span class="p">):</span>
    <span class="n">NOT_YUMMY</span> <span class="o">=</span> <span class="s">&quot;This is not yummy&quot;</span>
    
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_yummy</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NOT_YUMMY</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we can do things based on the type of error, if we so desire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">yummy_validator</span> <span class="o">=</span> <span class="n">Yummy</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">yummy_validator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="s">&#39;Fried Okra&#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;Fried Okra is yummy!&quot;</span>
<span class="k">except</span> <span class="n">InvalidError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="n">Yummy</span><span class="o">.</span><span class="n">NOT_YUMMY</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Fried Okra is not yummy&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;There is something wront with Fried Okra&quot;</span>
</pre></div>
</div>
<dl class="class">
<dt id="morbo.validators.DateTime">
<em class="property">class </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">DateTime</tt><big>(</big><em>now=False</em>, <em>default_format=''</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#morbo.validators.DateTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates many representations of date &amp; time and converts to datetime.datetime.
It will use <a class="reference external" href="http://pypi.python.org/pypi/timelib/">timelib</a> if available,
next it will try <a class="reference external" href="http://labix.org/python-dateutil">dateutil.parser</a>. If neither
is found, it will use <tt class="xref py py-func docutils literal"><span class="pre">datetime.strptime()</span></tt> with some predefined format string.</p>
</dd></dl>

<dl class="class">
<dt id="morbo.validators.Email">
<em class="property">class </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">Email</tt><big>(</big><em>optional=False</em><big>)</big><a class="headerlink" href="#morbo.validators.Email" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates strings that meet the guidelines in <a class="reference external" href="http://tools.ietf.org/html/rfc3696">RFC 3696</a></p>
</dd></dl>

<dl class="exception">
<dt id="morbo.validators.InvalidError">
<em class="property">exception </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">InvalidError</tt><a class="headerlink" href="#morbo.validators.InvalidError" title="Permalink to this definition">¶</a></dt>
<dd><p>This exception is thrown by all validators to indicate that data is invalid.
If you subclass Validator, throw this in validate().</p>
</dd></dl>

<dl class="exception">
<dt id="morbo.validators.InvalidGroupError">
<em class="property">exception </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">InvalidGroupError</tt><big>(</big><em>errors</em><big>)</big><a class="headerlink" href="#morbo.validators.InvalidGroupError" title="Permalink to this definition">¶</a></dt>
<dd><p>This exception represents a group of invalid errors. It takes a dict where
the keys are, presumably, the names of items that were invalid and the values
are the errors for their respective items.</p>
</dd></dl>

<dl class="class">
<dt id="morbo.validators.Text">
<em class="property">class </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">Text</tt><big>(</big><em>minlength=None</em>, <em>maxlength=None</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#morbo.validators.Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that a value is text and, optionally, that it meets a length specification.</p>
</dd></dl>

<dl class="class">
<dt id="morbo.validators.Validator">
<em class="property">class </em><tt class="descclassname">morbo.validators.</tt><tt class="descname">Validator</tt><big>(</big><em>optional=False</em><big>)</big><a class="headerlink" href="#morbo.validators.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base validator class. Don&#8217;t use it unless you are inheriting.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="connection.html"
                        title="previous chapter">morbo.connection</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="model.html"
                        title="next chapter">morbo.model</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/validators.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="morbo.model"
             >next</a> |</li>
        <li class="right" >
          <a href="connection.html" title="morbo.connection"
             >previous</a> |</li>
        <li><a href="index.html">morbo v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Elisha Cook.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>